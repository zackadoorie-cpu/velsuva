<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Vel'Suva — Console</title><style>body{font:14px/1.4 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0b1020;color:#e6eaf3;margin:0}header{position:sticky;top:0;background:#0f1530;padding:12px 16px;border-bottom:1px solid #24304b;display:flex;gap:10px;align-items:center;justify-content:space-between}h1{font-size:16px;margin:0}main{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:16px}section{background:#0f1530;border:1px solid #24304b;border-radius:12px;padding:12px}pre{white-space:pre-wrap;word-break:break-word;background:#0b1020;border:1px solid #24304b;border-radius:8px;padding:8px;max-height:60vh;overflow:auto}input,button,textarea{border-radius:10px;border:1px solid #24304b;background:#0b1020;color:#e6eaf3;padding:8px}button{background:#4453ff;border-color:#4453ff;cursor:pointer}button:disabled{opacity:.6;cursor:not-allowed}.row{display:flex;gap:8px;align-items:center}.muted{color:#9fb0d2;font-size:12px}</style></head><body><header><h1>Vel'Suva — Console</h1><div class="row"><input id="src" placeholder="State JSON URL" style="min-width:380px"/><button id="load">Load</button><button id="download">Download JSON</button></div></header><main><section><div class="row"><input id="cmd" placeholder="set oracle 5  •  note met with envoy" style="flex:1"/><button id="run">Run</button></div><div class="muted" style="margin-top:6px">Commands: set &lt;oracle|founder|pawn|rebel&gt; &lt;0-6&gt; • note &lt;text&gt; • help</div><pre id="log"></pre></section><section><div class="row" style="justify-content:space-between"><div>State</div><button id="copy">Copy JSON</button></div><pre id="state"></pre></section></main><script>(function(){function log(t){var p=document.getElementById('log');p.textContent=(t+'
')+p.textContent}function render(){document.getElementById('state').textContent=JSON.stringify(state,null,2)}function canClip(){try{return !!(navigator && navigator.clipboard && navigator.clipboard.writeText)}catch(e){return false}}function saveFile(name,content){try{var b=new Blob([content],{type:'application/json'});var a=document.createElement('a');a.href=URL.createObjectURL(b);a.download=name;a.click();URL.revokeObjectURL(a.href);return true}catch(e){return false}}async function copy(s){try{if(!canClip()) throw new Error('blocked');await navigator.clipboard.writeText(s);log('copied to clipboard')}catch(e){saveFile('velsuva_state.json',s);log('clipboard blocked — downloaded file')}}var urlParam=new URLSearchParams(location.search).get('src');var DEFAULT_SRC='https://raw.githubusercontent.com/zackadoorie-cpu/velsuva/main/velsuva/state.json';var srcInput=document.getElementById('src');srcInput.value=urlParam||DEFAULT_SRC||'';var state={oracle:3,founder:4,pawn:2,rebel:1,factions:[],sessions:[],hexes:[],history:[]};render();async function load(){var u=srcInput.value.trim();if(!u){log('enter a state.json URL');return}try{var r=await fetch(u);var j=await r.json();state=j;render();log('loaded '+u)}catch(e){log('load failed: '+(e&&e.message?e.message:String(e)))}}function run(){var raw=document.getElementById('cmd').value.trim();if(!raw) return;log('> '+raw);document.getElementById('cmd').value='';var m=raw.match(/^set\s+(oracle|founder|pawn|rebel)\s+(\d)$/i);if(m){var k=m[1].toLowerCase();var v=Math.max(0,Math.min(6,parseInt(m[2],10)));state[k]=v;render();log('ok: '+k+'='+v);return}var n=raw.match(/^note\s+(.+)/i);if(n){state.history=state.history||[];state.history.unshift({ts:Date.now(),note:n[1]});render();log('noted');return}if(raw==='help'){log('set <oracle|founder|pawn|rebel> <0-6> | note <text> | help');return}log('unknown command; type help')}document.getElementById('run').onclick=run;document.getElementById('cmd').addEventListener('keydown',function(e){if(e.key==='Enter') run()});document.getElementById('load').onclick=load;document.getElementById('copy').onclick=function(){copy(JSON.stringify(state,null,2))};document.getElementById('download').onclick=function(){saveFile('velsuva_state.json',JSON.stringify(state,null,2))};if(srcInput.value) load();})();</script></body></html>